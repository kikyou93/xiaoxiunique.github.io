(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{232:function(a,e,s){"use strict";s.r(e);var t=s(0),n=Object(t.a)({},(function(){var a=this,e=a.$createElement,s=a._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h3",{attrs:{id:"安装-ifconfig-命令-虚拟机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#安装-ifconfig-命令-虚拟机"}},[a._v("#")]),a._v(" 安装 ifconfig 命令, 虚拟机")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum install net-tools\n")])])]),s("h3",{attrs:{id:"docker安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" docker安装")]),a._v(" "),s("ul",[s("li",[a._v("卸载旧版本")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum remove docker "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-common "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-logrotate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-selinux "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-engine-selinux "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-engine\n")])])]),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("yum remove docker-ce docker-ce-cli containerd.io\n")])])]),s("ul",[s("li",[a._v("安装存储驱动")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])])]),s("ul",[s("li",[a._v("下载官方的yum源文件")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])])]),s("ul",[s("li",[a._v("安装docker-ce")])]),a._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[a._v("yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y docker-ce-18.09.0-3.el7 docker-ce-cli-18.09.0-3.el7 containerd.io-1.2.0-3.el7\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),s("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce\n")])])]),s("p",[s("strong",[a._v("1.启动docker")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl start docker \n")])])]),s("p",[s("strong",[a._v("2.停止docker")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("systemctl stop docker\n")])])]),s("p",[s("strong",[a._v("重启docker")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n")])])]),s("p",[s("strong",[a._v("3.docker 配置镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('vi /etc/docker/daemon.json \n{\n  "registry-mirrors": [\n    "https://registry.docker-cn.com"\n  ]\n}\n')])])]),s("p",[s("strong",[a._v("查看有哪些镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker image ls\n")])])]),s("p",[s("strong",[a._v("docker 安装镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull tomcat\n")])])]),s("p",[s("strong",[a._v("拉取镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker container pull [name]\n")])])]),s("p",[s("strong",[a._v("连接镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("--link dockerName\n")])])]),s("p",[s("strong",[a._v("进入容器")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker exec -it [container_id] bash\n")])])]),s("p",[s("strong",[a._v("修改docker 启动容器指定端口")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker container run  -p 8080:8080 [container_name]\n")])])]),s("p",[s("strong",[a._v("docker 从 docker容器中拷贝文件到本地种")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker cp tomcat:/usr/local/tomcat/conf/web.xml ./\n// 将tomcat 文件下的web.xml配置， 复制到当前目录\n")])])]),s("p",[s("strong",[a._v("docker 同时删除多个符合条件的容器")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('docker rm $(docker container ls -f "status=exited" -q)\n')])])]),s("p",[s("strong",[a._v("docker 刪除镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker rmi [imagename]\n")])])]),s("p",[s("strong",[a._v("docker 配置nginx")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker container run -p 8881:80 --name nginx -v /root/webserver/:/www -v /usr/local/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /usr/local/nginx/logs/:/wwwlogs -d nginx\n")])])]),s("h3",{attrs:{id:"docker安装-tomcat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-tomcat"}},[a._v("#")]),a._v(" docker安装 tomcat")]),a._v(" "),s("ul",[s("li",[a._v("创建tomcat 本地挂载文件")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir -p /usr/local/atom.hu/tomcat/webapps\n")])])]),s("ul",[s("li",[a._v("拉取镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull tomcat\n")])])]),s("ul",[s("li",[a._v("启动镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run --name tomcat -p 80:8080 -v /usr/local/atom.hu/tomcat/webapps:/usr/local/tomcat/webapps -d tomcat\n\n-p 主机与容器端口\n-v 挂载文件\n--name 给容器命名\n")])])]),s("h3",{attrs:{id:"docker安装-jenkins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-jenkins"}},[a._v("#")]),a._v(" docker安装 jenkins")]),a._v(" "),s("ul",[s("li",[a._v("创建jenkins 文件,并修改文件权限")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("mkdir -p /usr/local/atom.hu/jenkins\nchown -R 1000:1000 /usr/loca/atom.hu/jenkins\n")])])]),s("ul",[s("li",[a._v("拉取镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull jenkins\n")])])]),s("ul",[s("li",[a._v("启动镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -p 8080:8080 -p 50000:50000 --name jenkins --privileged=true -v /usr/local/atom.hu/jenkins/:/var/jenkins_home -d jenkins\n")])])]),s("ul",[s("li",[s("p",[a._v("稍作等待\n"),s("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1g0jn6kraqjj315d0wg40r.jpg",alt:""}})])]),a._v(" "),s("li",[s("p",[a._v("进入目录查看密码")])])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("[root@localhost secrets]# cat initialAdminPassword \n9ca7368042fe45be8b693ab43e7797d1\n")])])]),s("p",[s("strong",[a._v("jenkins 容器中的公钥私钥")])]),a._v(" "),s("p",[a._v("很常用的 "),s("code",[a._v("jenkins")]),a._v(" 构建操作有：在 "),s("code",[a._v("Execute shell")]),a._v(" 步骤中用 "),s("code",[a._v("ssh")]),a._v(" 的方式远程登录上其他服务器，服务器上面的执行 "),s("code",[a._v("shell")]),a._v(" 脚本。 "),s("code",[a._v("ssh")]),a._v(" 方式需要用到的 "),s("code",[a._v("public key")]),a._v(" 和 "),s("code",[a._v("private key")]),a._v(" 也是可以用 "),s("code",[a._v("-v")]),a._v(" 参数挂载到 "),s("code",[a._v("/var/jenkins_home/.ssh")]),a._v(" 目录中。注意，这里不挂载到容器的 "),s("code",[a._v("/root/.ssh")]),a._v(" 目录，因为整个 "),s("code",[a._v("jenkins")]),a._v(" 容器是以 "),s("code",[a._v("jenkins")]),a._v(" 用户来运行的。")])])}),[],!1,null,null,null);e.default=n.exports}}]);