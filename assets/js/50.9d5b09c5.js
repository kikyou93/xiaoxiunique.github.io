(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{165:function(a,s,e){"use strict";e.r(s);var t=e(0),n=Object(t.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h3",{attrs:{id:"安装-ifconfig-命令-虚拟机"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装-ifconfig-命令-虚拟机"}},[a._v("#")]),a._v(" 安装 ifconfig 命令, 虚拟机")]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" net-tools\n")])])]),e("h3",{attrs:{id:"docker安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker安装"}},[a._v("#")]),a._v(" docker安装")]),a._v(" "),e("ul",[e("li",[a._v("卸载旧版本")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum remove docker "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-client-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-common "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-latest-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-selinux "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-engine-selinux "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("\\")]),a._v("\n                  docker-engine\n")])])]),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("yum remove docker-ce docker-ce-cli containerd.io\n")])])]),e("ul",[e("li",[a._v("安装存储驱动")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])])]),e("ul",[e("li",[a._v("下载官方的yum源文件")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo\n")])])]),e("ul",[e("li",[a._v("安装docker-ce")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[a._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" -y docker-ce-18.09.0-3.el7 docker-ce-cli-18.09.0-3.el7 containerd.io-1.2.0-3.el7\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("sudo")]),a._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[a._v("install")]),a._v(" docker-ce\n")])])]),e("p",[e("strong",[a._v("1.启动docker")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("systemctl start docker \n")])])]),e("p",[e("strong",[a._v("2.停止docker")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("systemctl stop docker\n")])])]),e("p",[e("strong",[a._v("重启docker")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("$ sudo systemctl daemon-reload\n$ sudo systemctl restart docker\n")])])]),e("p",[e("strong",[a._v("3.docker 配置镜像")])]),a._v(" "),e("div",{staticClass:"language-shell extra-class"},[e("pre",{pre:!0,attrs:{class:"language-shell"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[a._v("vi")]),a._v(" /etc/docker/daemon.json \n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"registry-mirrors"')]),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://registry.docker-cn.com"')]),a._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])])]),e("p",[e("strong",[a._v("查看有哪些镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker image ls\n")])])]),e("p",[e("strong",[a._v("docker 安装镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker pull tomcat\n")])])]),e("p",[e("strong",[a._v("拉取镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker container pull [name]\n")])])]),e("p",[e("strong",[a._v("连接镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("--link dockerName\n")])])]),e("p",[e("strong",[a._v("进入容器")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker exec -it [container_id] bash\n")])])]),e("p",[e("strong",[a._v("修改docker 启动容器指定端口")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker container run  -p 8080:8080 [container_name]\n")])])]),e("p",[e("strong",[a._v("docker 从 docker容器中拷贝文件到本地种")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker cp tomcat:/usr/local/tomcat/conf/web.xml ./\n// 将tomcat 文件下的web.xml配置， 复制到当前目录\n")])])]),e("p",[e("strong",[a._v("docker 同时删除多个符合条件的容器")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('docker rm $(docker container ls -f "status=exited" -q)\n')])])]),e("p",[e("strong",[a._v("docker 刪除镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker rmi [imagename]\n")])])]),e("p",[e("strong",[a._v("docker 配置nginx")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker container run -p 8881:80 --name nginx -v /root/webserver/:/www -v /usr/local/nginx/conf/nginx.conf:/etc/nginx/nginx.conf -v /usr/local/nginx/logs/:/wwwlogs -d nginx\n")])])]),e("h3",{attrs:{id:"docker安装-tomcat"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-tomcat"}},[a._v("#")]),a._v(" docker安装 tomcat")]),a._v(" "),e("ul",[e("li",[a._v("创建tomcat 本地挂载文件")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("mkdir -p /usr/local/atom.hu/tomcat/webapps\n")])])]),e("ul",[e("li",[a._v("拉取镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker pull tomcat\n")])])]),e("ul",[e("li",[a._v("启动镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run --name tomcat -p 80:8080 -v /usr/local/atom.hu/tomcat/webapps:/usr/local/tomcat/webapps -d tomcat\n\n-p 主机与容器端口\n-v 挂载文件\n--name 给容器命名\n")])])]),e("h3",{attrs:{id:"docker安装-jenkins"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker安装-jenkins"}},[a._v("#")]),a._v(" docker安装 jenkins")]),a._v(" "),e("ul",[e("li",[a._v("创建jenkins 文件,并修改文件权限")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("mkdir -p /usr/local/atom.hu/jenkins\nchown -R 1000:1000 /usr/loca/atom.hu/jenkins\n")])])]),e("ul",[e("li",[a._v("拉取镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker pull jenkins\n")])])]),e("ul",[e("li",[a._v("启动镜像")])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker run -p 8080:8080 -p 50000:50000 --name jenkins --privileged=true -v /usr/local/atom.hu/jenkins/:/var/jenkins_home -d jenkins\n")])])]),e("ul",[e("li",[e("p",[a._v("稍作等待\n"),e("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1g0jn6kraqjj315d0wg40r.jpg",alt:""}})])]),a._v(" "),e("li",[e("p",[a._v("进入目录查看密码")])])]),a._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@localhost secrets]# cat initialAdminPassword \n9ca7368042fe45be8b693ab43e7797d1\n")])])]),e("p",[e("strong",[a._v("jenkins 容器中的公钥私钥")])]),a._v(" "),e("p",[a._v("很常用的 "),e("code",[a._v("jenkins")]),a._v(" 构建操作有：在 "),e("code",[a._v("Execute shell")]),a._v(" 步骤中用 "),e("code",[a._v("ssh")]),a._v(" 的方式远程登录上其他服务器，服务器上面的执行 "),e("code",[a._v("shell")]),a._v(" 脚本。 "),e("code",[a._v("ssh")]),a._v(" 方式需要用到的 "),e("code",[a._v("public key")]),a._v(" 和 "),e("code",[a._v("private key")]),a._v(" 也是可以用 "),e("code",[a._v("-v")]),a._v(" 参数挂载到 "),e("code",[a._v("/var/jenkins_home/.ssh")]),a._v(" 目录中。注意，这里不挂载到容器的 "),e("code",[a._v("/root/.ssh")]),a._v(" 目录，因为整个 "),e("code",[a._v("jenkins")]),a._v(" 容器是以 "),e("code",[a._v("jenkins")]),a._v(" 用户来运行的。")])])}),[],!1,null,null,null);s.default=n.exports}}]);