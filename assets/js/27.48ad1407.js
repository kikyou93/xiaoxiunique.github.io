(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{170:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h3",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[s._v("#")]),s._v(" 前言")]),s._v(" "),a("p",[a("code",[s._v("Spring")]),s._v(", 是一个轻量级的控制反转"),a("code",[s._v("(IOC)")]),s._v("和面向切面"),a("code",[s._v("(AOP)")]),s._v("的容器框架")]),s._v(" "),a("h3",{attrs:{id:"_1-控制反转-ioc-inversion-of-controller"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-控制反转-ioc-inversion-of-controller"}},[s._v("#")]),s._v(" 1.控制反转 "),a("code",[s._v("IOC")]),s._v(" (inversion of controller)")]),s._v(" "),a("p",[s._v("IOC 是一种概念, 是吧我们程序中类与类之间的依赖关系交给容器处理, 一般有两种方式")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("依赖查找 "),a("code",[s._v("DL (dependency lookup)")])]),s._v(" "),a("p",[s._v("程序提供查找方式, 交给容器去查找(回调函数)")])]),s._v(" "),a("li",[a("p",[s._v("依赖注入 "),a("code",[s._v("DI (dependency injection)")])]),s._v(" "),a("p",[s._v("程序不提供查找方式, 提供合适的构造方法或者 setter 方法,让容器进行注入来解决依赖关系")])])]),s._v(" "),a("p",[a("strong",[s._v("spring 的控制反转就是通过依赖注入来实现的")])]),s._v(" "),a("h3",{attrs:{id:"_2-什么叫依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-什么叫依赖"}},[s._v("#")]),s._v(" 2.什么叫依赖")]),s._v(" "),a("p",[s._v("简单的说,一个类实现某个功能需要依赖另一个类的帮助来实现")]),s._v(" "),a("blockquote",[a("p",[s._v("举个简单的例子")])]),s._v(" "),a("p",[s._v("将类抽象为某一件事物,不同的类为不同的事物, 比如我们现在有一个 "),a("code",[s._v("菜刀类")]),s._v(" 和一个 "),a("code",[s._v("肉类")]),s._v(", 如果我们现在想要菜能够将肉切成片, 而后才能进行后台的烹饪. 但是我们发现光凭 "),a("code",[s._v("菜刀")]),s._v(" 和 "),a("code",[s._v("肉")]),s._v("根本无法达到我们想要的效果, 我们想要叫肉变成肉片, 还必须借助一个"),a("code",[s._v("菜板类")]),s._v(",也只有借助"),a("code",[s._v("菜板")]),s._v(", 我们才能达到我们想要的想过, 而现在 "),a("code",[s._v("菜刀")]),s._v(" 和 "),a("code",[s._v("菜板")]),s._v(" 也就存在依赖的关系")]),s._v(" "),a("h4",{attrs:{id:"用程序举一个例子"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用程序举一个例子"}},[s._v("#")]),s._v(" 用程序举一个例子")]),s._v(" "),a("p",[a("strong",[s._v("目标: 我们将模拟一个 web 登录验证功能")])]),s._v(" "),a("p",[s._v("创建两个文件 "),a("code",[s._v("UserDao.java")]),s._v(" "),a("code",[s._v("UserService.java")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzmbckbzgxj30te050744.jpg",alt:""}})]),s._v(" "),a("p",[a("code",[s._v("UserDao.java")]),s._v(" 作为数据持久层,连接数据库, 提供链接数据库, 判断数据库中用户名和密码是否正确")]),s._v(" "),a("p",[a("code",[s._v("UserDao")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDao")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("loginUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("System")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("out"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("println")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"这是通过jdbc进行登陆验证的dao方法"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[a("code",[s._v("UserService.java")]),s._v(" 作为业务逻辑层, 调用数据持久层进行具体业务编写")]),s._v(" "),a("p",[a("code",[s._v("UserService")])]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n * 类描述:用于对关于用户登陆,用户增删改查的服务类(service)\n * @author atom.hu\n *\n */")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("class")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("/**\n\t * 通过调用与数据库交互的UserDao里面的loginUser方法,判断是否验证成功\n\t * @param userName\n\t * @param password\n\t * @return\n\t */")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("loginUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" flag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("false")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//在userService中,,为了实现登陆的验证,需要调用Dao的方法")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDao")]),s._v(" userDao "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserDao")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("//IUserDao userDao = new UserDaoOther();")]),s._v("\n\t\tflag "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" userDao"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("loginUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("userName"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" password"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" flag"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n")])])]),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzmb5z181hj30v009lq36.jpg",alt:""}})]),s._v(" "),a("p",[s._v("这里我们在"),a("code",[s._v("UserService")]),s._v("中创建"),a("code",[s._v("main")]),s._v("方法, 模拟进行调用")]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("static")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("void")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("main")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("String")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" args"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n\t"),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),s._v(" userService "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("UserService")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n\tuserService"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("loginUser")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aaa"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"bbb"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),a("p",[s._v("至此, 我们就模拟了一个简单的登录功能, 不难发现按照传统的 mvc 模式, 我们需要使用 dao , service, controller 三层结合起来使用, 每层负责自己的事,")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzna1dversj30xs050aa2.jpg",alt:""}})]),s._v(" "),a("p",[s._v("在上的代码中 UserService 中调用 UserDao 中的代码, 它们便就存在依赖关系"),a("code",[s._v("(图中红线框类)")])]),s._v(" "),a("h4",{attrs:{id:"_3-面向接口编程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-面向接口编程"}},[s._v("#")]),s._v(" 3.面向接口编程")]),s._v(" "),a("p",[s._v("上面介绍了依赖的情况, 然后在实际开发中,都需要使用接口定义公共方法, 实现"),a("code",[s._v("(implement)")]),s._v("接口, 针对具体方法进行实现")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznff7l0h8j30qu0f0t8z.jpg",alt:""}})]),s._v(" "),a("p",[s._v("在实际开发中,随着项目的开展, 需求不时也会发生变化, 详细到每一个功能点, 今天这个功能点需要实现 A 功能, 明天业务可能就会变成 B 功能, 再往后也有可能在回到 A 功能, 在针对着这样多变的开发环境下, 针对接口编程就变得尤为重要")]),s._v(" "),a("p",[a("strong",[s._v("星期一")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzngjszxrsj30v80bf74h.jpg",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("星期二")]),s._v(", 老板心情不太好, 想要换个样子")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh1r960lj301x01jq2t.jpg",alt:""}})]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh0hm2yxj30wa0b3mxd.jpg",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("星期三")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh5w34xgj30um0eqwgs.jpg",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("老板看了看觉得这个颜色好像有点不妥, 于是便又换了个样子")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh3e7hzzj30uy0bvq35.jpg",alt:""}})]),s._v(" "),a("p",[s._v("此时的你")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh6rnembj302i02r0sq.jpg",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("星期四")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznh9dv9p8j30iv07i3z6.jpg",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("星期五 老板觉得, 看来看去, 还是觉得星期一的比较好")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznhak3ityj30ha074dgd.jpg",alt:""}})]),s._v(" "),a("p",[s._v("尽管你再不想改, 但是为了生存你还是要去做, 然后这样的工作, 其实更多的是体力活, 对于技术而言增长不大")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznhfknbavj30n70ctgn2.jpg",alt:""}})]),s._v(" "),a("p",[s._v("然后其实我们可以很好的避免这一点")]),s._v(" "),a("p",[s._v("我们需要定义一个公共的接口 "),a("code",[s._v("IService")]),s._v(", 接口中定义需要实现的功能列表, 然后我们只需要创建多个不同的实现类即可")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fznhrq2clzj30t20f53yw.jpg",alt:""}})]),s._v(" "),a("p",[s._v("如上图所示, 再实现具体的功能时只需要通过接口"),a("code",[s._v("new")]),s._v(" 对应的对象即可")]),s._v(" "),a("p",[a("strong",[s._v("今天要实现 A 功能")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzni0z4tmxg301e01edfm.gif",alt:""}})]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceA")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceAImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("strong",[s._v("今天要实现 B 功能")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzni0z4tmxg301e01edfm.gif",alt:""}})]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceB")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceBImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[a("strong",[s._v("今天要实现 C 功能")])]),s._v(" "),a("p",[a("img",{attrs:{src:"https://ws1.sinaimg.cn/large/0066iHyhgy1fzni0z4tmxg301e01edfm.gif",alt:""}})]),s._v(" "),a("div",{staticClass:"language-java extra-class"},[a("pre",{pre:!0,attrs:{class:"language-java"}},[a("code",[a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("IService")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceC")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("ServiceCImpl")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])])]),a("p",[s._v("这样而言, 无论需求如果改变都不再害怕")])])}),[],!1,null,null,null);t.default=e.exports}}]);