(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{234:function(s,t,a){"use strict";a.r(t);var n=a(0),e=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("编辑 "),a("code",[s._v("crontab")])]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("crontab -e\n")])])]),a("p",[s._v("查看 "),a("code",[s._v("crontab")]),s._v("列表")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("crontab -l\n")])])]),a("p",[s._v("追加内容")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(">>\n")])])]),a("p",[s._v("覆盖内容")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v(">\n")])])]),a("p",[s._v("建立软连接")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("ln -s /usr/local/home/node/node-v10.15.3-linux-x64/bin/node node\n")])])]),a("p",[s._v("获取服务器各个状态下的连接数")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("netstat -n | awk '/^tcp/{++S[$NF]}END{for (a in S) print a, S[a]}'\n")])])]),a("p",[s._v("awk 命令")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("awk -F ',' '{print $1, $2}'\n")])])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/xiaoxiunique/Web-Tip/master/20190607234714.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("sed")]),s._v(" "),a("img",{attrs:{src:"https://raw.githubusercontent.com/xiaoxiunique/Web-Tip/master/20190607235457.png",alt:""}})]),s._v(" "),a("p",[a("strong",[s._v("java 如何加载.class字节码文件")]),s._v(" "),a("img",{attrs:{src:"https://raw.githubusercontent.com/xiaoxiunique/Web-Tip/master/20190608002306.png",alt:""}})]),s._v(" "),a("p",[s._v("自动启动脚本")]),s._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('\n#/bin/bash\n\n# 门店服务主目录\nmenderyWorkspace="/var/lib/jenkins/workspace/lk-mendery-truck/lk-truck-mendery-webfront/target"\n\n# 进入主目录\ncd $menderyWorkspace\n\n# 打印当前当前文件夹路径\necho $(pwd)\n\n# 查找文件\n```shell\nfind ~ -iname "wenjian"\n')])])]),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 记录错误信息")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function-name function"}},[s._v("handleErr")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断文件夹是否存在")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -d "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"errorLog"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 文件不存在 创建文件")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" errorLog\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断日志文件是否存在")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v(" -x "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"nohup.log"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 日志文件不存在 直接返回")]),s._v("\n        "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("touch")]),s._v(" nohup.log\n   "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("fi")]),s._v("\n\n   "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 拷贝最近的错误日志")]),s._v("\n   "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("tail")]),s._v(" -2000 nohup.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" ./errorLog/"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("date")]),s._v(" +%Y%m%d"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("`")])]),s._v(".log\n\n   "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"record message for error"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 判断现在主进程是否在运行")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("cur")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v(" -ef "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"lk-truck-mendery-webfront"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" -v "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"grep"')]),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" cur\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 如果现在进程存活, 不进行处理")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("if")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"'),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$cur")]),s._v('"')]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("then")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"the service is alive"')]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("else")]),s._v("\n    handleErr\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"The service was shutdown!"')]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"Starting service..."')]),s._v("\n    java -Dspring.profile.active"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("pro -jar lk-truck-mendery-webfront-1.0.0-SNAPSHOT.jar "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" nohup.log "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&")]),s._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);