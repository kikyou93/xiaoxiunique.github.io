<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>命名 | 我的学习测试</title>
    <meta name="description" content="我的学习测试">
    
    
    <link rel="preload" href="/assets/css/0.styles.c63ac9d8.css" as="style"><link rel="preload" href="/assets/js/app.3a816497.js" as="script"><link rel="preload" href="/assets/js/2.48b11553.js" as="script"><link rel="preload" href="/assets/js/36.1698b505.js" as="script"><link rel="prefetch" href="/assets/js/10.b89577a1.js"><link rel="prefetch" href="/assets/js/11.783604b9.js"><link rel="prefetch" href="/assets/js/12.54ed55d4.js"><link rel="prefetch" href="/assets/js/13.241ed680.js"><link rel="prefetch" href="/assets/js/14.f79ab3ad.js"><link rel="prefetch" href="/assets/js/15.f2bb3ba6.js"><link rel="prefetch" href="/assets/js/16.5eed36d4.js"><link rel="prefetch" href="/assets/js/17.c73921a4.js"><link rel="prefetch" href="/assets/js/18.e58de6a2.js"><link rel="prefetch" href="/assets/js/19.b2a8a042.js"><link rel="prefetch" href="/assets/js/20.df605c45.js"><link rel="prefetch" href="/assets/js/21.a514942d.js"><link rel="prefetch" href="/assets/js/22.f088b8f1.js"><link rel="prefetch" href="/assets/js/23.d5f8d985.js"><link rel="prefetch" href="/assets/js/24.5770e64c.js"><link rel="prefetch" href="/assets/js/25.a6e2a16c.js"><link rel="prefetch" href="/assets/js/26.83e58598.js"><link rel="prefetch" href="/assets/js/27.52735577.js"><link rel="prefetch" href="/assets/js/28.802eebb7.js"><link rel="prefetch" href="/assets/js/29.f161244d.js"><link rel="prefetch" href="/assets/js/3.350849cf.js"><link rel="prefetch" href="/assets/js/30.4fec3df3.js"><link rel="prefetch" href="/assets/js/31.23003ba3.js"><link rel="prefetch" href="/assets/js/32.c76f679c.js"><link rel="prefetch" href="/assets/js/33.c2c3871a.js"><link rel="prefetch" href="/assets/js/34.6bcc39bd.js"><link rel="prefetch" href="/assets/js/35.32abfdb0.js"><link rel="prefetch" href="/assets/js/37.e5e9fc9f.js"><link rel="prefetch" href="/assets/js/38.825f4500.js"><link rel="prefetch" href="/assets/js/39.00c1ac9d.js"><link rel="prefetch" href="/assets/js/4.b24dd4b9.js"><link rel="prefetch" href="/assets/js/40.3c8b3033.js"><link rel="prefetch" href="/assets/js/41.b66b4916.js"><link rel="prefetch" href="/assets/js/42.ad86d694.js"><link rel="prefetch" href="/assets/js/43.24ce6c85.js"><link rel="prefetch" href="/assets/js/44.eb05e054.js"><link rel="prefetch" href="/assets/js/45.a72bebcd.js"><link rel="prefetch" href="/assets/js/46.3559d3cc.js"><link rel="prefetch" href="/assets/js/47.e687d515.js"><link rel="prefetch" href="/assets/js/48.aa53e59e.js"><link rel="prefetch" href="/assets/js/49.243bb74d.js"><link rel="prefetch" href="/assets/js/5.445ea915.js"><link rel="prefetch" href="/assets/js/50.9d5b09c5.js"><link rel="prefetch" href="/assets/js/51.7319419a.js"><link rel="prefetch" href="/assets/js/52.02760e8c.js"><link rel="prefetch" href="/assets/js/53.c9b9bc72.js"><link rel="prefetch" href="/assets/js/54.6d5b0457.js"><link rel="prefetch" href="/assets/js/55.e39db9c6.js"><link rel="prefetch" href="/assets/js/56.f9f2b949.js"><link rel="prefetch" href="/assets/js/57.bc68ff71.js"><link rel="prefetch" href="/assets/js/58.4d51b510.js"><link rel="prefetch" href="/assets/js/59.3660de3b.js"><link rel="prefetch" href="/assets/js/6.caf28be5.js"><link rel="prefetch" href="/assets/js/60.24b5d777.js"><link rel="prefetch" href="/assets/js/61.c4f36dd9.js"><link rel="prefetch" href="/assets/js/62.bb33da07.js"><link rel="prefetch" href="/assets/js/63.7baf0019.js"><link rel="prefetch" href="/assets/js/7.97cf4434.js"><link rel="prefetch" href="/assets/js/8.d16fdfd2.js"><link rel="prefetch" href="/assets/js/9.eec41da1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c63ac9d8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">我的学习测试</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/idea/" class="nav-link">IDEA</a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/web/" class="nav-link">Web</a></div><div class="nav-item"><a href="/designPattern/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">杂记</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/idea/" class="nav-link">IDEA</a></div><div class="nav-item"><a href="/devops/" class="nav-link">DevOps</a></div><div class="nav-item"><a href="/web/" class="nav-link">Web</a></div><div class="nav-item"><a href="/designPattern/" class="nav-link">设计模式</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">杂记</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>杂记</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/" class="sidebar-link">深度好文</a></li><li><a href="/blog/Arthas tunnel server web 在线诊断.html" class="sidebar-link">Arthas tunnel server web 在线诊断</a></li><li><a href="/blog/Chrome 浏览器插件整理.html" class="sidebar-link">Chrome 浏览器插件整理</a></li><li><a href="/blog/Git 教程.html" class="sidebar-link">Git 教程</a></li><li><a href="/blog/GridFlow 快捷键.html" class="sidebar-link">GridFlow 快捷键</a></li><li><a href="/blog/Java 实现动态数据 ArrayList.html" class="sidebar-link">Java 实现动态数据 ArrayList</a></li><li><a href="/blog/Kafka 入门探索.html" class="sidebar-link">Kafka 入门探索</a></li><li><a href="/blog/LeetCode 122号问题 买卖股票的最佳时机.html" class="sidebar-link">LeetCode 122号问题 买卖股票的最佳时机</a></li><li><a href="/blog/LeetCode 189号问题 旋转数组.html" class="sidebar-link">LeetCode 189号问题 旋转数组</a></li><li><a href="/blog/LeetCode 203号问题 删除链表中的元素.html" class="sidebar-link">LeetCode 203号问题 删除链表中的元素</a></li><li><a href="/blog/LeetCode 21号问题， 合并 k 条链表.html" class="sidebar-link">LeetCode 21号问题， 合并 k 条链表</a></li><li><a href="/blog/LeetCode 第70号 爬楼梯 问题.html" class="sidebar-link">LeetCode 第70号 爬楼梯 问题</a></li><li><a href="/blog/MQTT 简介.html" class="sidebar-link">MQTT 简介</a></li><li><a href="/blog/MYSQL EXPLAIN.html" class="sidebar-link">MYSQL EXPLAIN</a></li><li><a href="/blog/MybatisPlus 自动生成器配置.html" class="sidebar-link">MybatisPlus 自动生成器配置</a></li><li><a href="/blog/RequestBody 和 RequestParam的区别.html" class="sidebar-link">RequestBody 和 RequestParam的区别</a></li><li><a href="/blog/SpringIOC 概述.html" class="sidebar-link">SpringIOC 概述</a></li><li><a href="/blog/leetCode 存在重复元素.html" class="sidebar-link">leetCode 存在重复元素</a></li><li><a href="/blog/xshell  配色方案.html" class="sidebar-link">xshell  配色方案</a></li><li><a href="/blog/优秀网站合集.html" class="sidebar-link">优秀网站合集</a></li><li><a href="/blog/写出优美Java代码注意事项.html" class="sidebar-link">写出优美Java代码注意事项</a></li><li><a href="/blog/工具网站.html" class="sidebar-link">工具网站</a></li><li><a href="/blog/工具网站整理.html" class="sidebar-link">工具网站整理</a></li><li><a href="/blog/我平常开发都会用什么额外软件辅助开发.html" class="sidebar-link">我平常开发都会用什么额外软件辅助开发</a></li><li><a href="/blog/手写快速排序.html" class="sidebar-link">手写快速排序</a></li><li><a href="/blog/排序算法.html" class="sidebar-link">排序算法</a></li><li><a href="/blog/正则表达式.html" class="sidebar-link">正则表达式</a></li><li><a href="/blog/装机必备软件.html" class="sidebar-link">装机必备软件</a></li><li><a href="/blog/计算机基础杂记.html" class="sidebar-link">计算机基础杂记</a></li><li><a href="/blog/让你快速地改善代码质量的20条编程规范.html" class="active sidebar-link">让你快速地改善代码质量的20条编程规范</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/链表队列 LinkedListQueue.html" class="sidebar-link">链表队列 LinkedListQueue</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="命名"><a href="#命名" class="header-anchor">#</a> 命名</h3> <p>大到项目名、模块名、包名、对外暴露的接口，小到类名、函数名、变量名、参数名，只要是做开发，我们就逃不过“起名字”这一关。命名的好坏，对于代码的可读性来说非常重要，甚至可以说是起决定性作用的。除此之外，命名能力也体现了一个程序员的基本编程素养。</p> <p>取一个特别合适的名字是一件非常有挑战的事情，即便是对母语是英语的程序员来说，也是如此。而对于我们这些英语非母语的程序员来说，想要起一个能准确达意的名字，更是难上加难了。</p> <p>实际上，命名这件事说难也不难，关键还是看你重不重视，愿不愿意花时间。对于影响范围比较大的命名，比如包名、接口、类名，我们一定要反复斟酌、推敲。实在想不到好名字的时候，可以去 GitHub 上用相关的关键词联想搜索一下，看看类似的代码是怎么命名的</p> <h4 id="_1-命名多长合适"><a href="#_1-命名多长合适" class="header-anchor">#</a> 1. 命名多长合适</h4> <p>命名的一个原则就是以能准确达意为目标。不过，对于代码的编写者来说，自己对代码的逻辑很清楚，总感觉用什么样的命名都可以达意，实际上，对于不熟悉你代码的同事来讲，可能就不这么认为了。所以，命名的时候，我们一定要学会换位思考，假设自己不熟悉这块代码，从代码阅读者的角度去考量命名是否足够直观。</p> <h4 id="_2-利用上下文简化代码"><a href="#_2-利用上下文简化代码" class="header-anchor">#</a> 2. 利用上下文简化代码</h4> <p>我们先来看一个简单的例子</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> userName<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> userPassword<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> userAvatarUrl<span class="token punctuation">;</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在 User 类这样一个上下文中，我们没有在成员变量的命名中重复添加“user”这样一个前缀单词，而是直接命名为 name、password、avatarUrl。在使用这些属性时候，我们能借助对象这样一个上下文，表意也足够明确。具体代码如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token class-name">User</span> user <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">User</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
user<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 借助user对象这个上下文</span>
</code></pre></div><p>除了类之外，函数参数也可以借助函数这个上下文来简化命名。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">uploadUserAvatarImageToAliyun</span><span class="token punctuation">(</span><span class="token class-name">String</span> userAvatarImageUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//利用上下文简化为：</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">uploadUserAvatarImageToAliyun</span><span class="token punctuation">(</span><span class="token class-name">String</span> imageUri<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="_3-命名要可读-可搜索"><a href="#_3-命名要可读-可搜索" class="header-anchor">#</a> 3.命名要可读, 可搜索</h4> <p>我这里所说的“可读”，指的是不要用一些特别生僻、难发音的英文单词来命名。</p> <p>我们在 IDE 中编写代码的时候，经常会用“关键词联想”的方法来自动补全和搜索。比如，键入某个对象“.get”，希望 IDE 返回这个对象的所有 get 开头的方法。再比如，通过在 IDE 搜索框中输入“Array”，搜索 JDK 中数组相关的类。所以，我们在命名的时候，最好能符合整个项目的命名习惯。大家都用“selectXXX”表示查询，你就不要用“queryXXX”；大家都用“insertXXX”表示插入一条数据，你就要不用“addXXX”，统一规约是很重要的，能减少很多不必要的麻烦。</p> <h4 id="_4-如何命名接口和抽象类"><a href="#_4-如何命名接口和抽象类" class="header-anchor">#</a> 4. 如何命名接口和抽象类</h4> <p>对于接口的命名，一般有两种比较常见的方式。一种是加前缀“I”，表示一个 Interface。比如 IUserService，对应的实现类命名为 UserService。另一种是不加前缀，比如 UserService，对应的实现类加后缀“Impl”，比如 UserServiceImpl。</p> <p>对于抽象类的命名，也有两种方式，一种是带上前缀“Abstract”，比如 AbstractConfiguration；另一种是不带前缀“Abstract”。实际上，对于接口和抽象类，选择哪种命名方式都是可以的，只要项目里能够统一就行。</p> <h3 id="注释"><a href="#注释" class="header-anchor">#</a> 注释</h3> <h4 id="_1-注释到底该写什么？"><a href="#_1-注释到底该写什么？" class="header-anchor">#</a> 1. 注释到底该写什么？</h4> <p>注释的目的就是让代码更容易看懂。只要符合这个要求的内容，你就可以将它写到注释里。总结一下，注释的内容主要包含这样三个方面：<strong>做什么、为什么、怎么做</strong>。</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>注释最重要的事要表明 做什么、为什么、怎么做.</p></div> <p>比如:</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">/**
* (what) Bean factory to create beans. 
* 
* (why) The class likes Spring IOC framework, but is more lightweight. 
*
* (how) Create objects from different sources sequentially:
* user specified object &gt; SPI &gt; configuration &gt; default object.
*/</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BeansFactory</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>对于逻辑比较复杂的代码或者比较长的函数，如果不好提炼、不好拆分成小的函数调用，那我们可以借助总结性的注释来让代码结构更清晰、更有条理。</strong></p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isValidPasword</span><span class="token punctuation">(</span><span class="token class-name">String</span> password<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// check if password is null or empty</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// check if the length of password is between 4 and 64</span>
  <span class="token keyword">int</span> length <span class="token operator">=</span> password<span class="token punctuation">.</span><span class="token function">length</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>length <span class="token operator">&lt;</span> <span class="token number">4</span> <span class="token operator">||</span> length <span class="token operator">&gt;</span> <span class="token number">64</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token comment">// check if password contains only lowercase characters</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isAllLowerCase</span><span class="token punctuation">(</span>password<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
    
  <span class="token comment">// check if password contains only a~z,0~9,dot</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> length<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">char</span> c <span class="token operator">=</span> password<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'a'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'z'</span><span class="token punctuation">)</span> <span class="token operator">||</span> <span class="token punctuation">(</span>c <span class="token operator">&gt;=</span> <span class="token string">'0'</span> <span class="token operator">&amp;&amp;</span> c <span class="token operator">&lt;=</span> <span class="token string">'9'</span><span class="token punctuation">)</span> <span class="token operator">||</span> c <span class="token operator">==</span> <span class="token string">'.'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="_2-注释是不是越多越好？"><a href="#_2-注释是不是越多越好？" class="header-anchor">#</a> 2. 注释是不是越多越好？</h4> <p>类和函数一定要写注释，而且要写得尽可能全面、详细，而函数内部的注释要相对少一些，一般都是靠好的命名、提炼函数、解释性变量、总结性注释来提高代码的可读性。</p> <h3 id="_3-类写多大才合适"><a href="#_3-类写多大才合适" class="header-anchor">#</a> 3. 类写多大才合适</h3> <p>对于函数代码行数的最大限制，网上有一种说法，那就是不要超过一个显示屏的垂直高度。比如，在我的电脑上，如果要让一个函数的代码完整地显示在 IDE 中，那最大代码行数不能超过 50。这个说法我觉得挺有道理的。因为超过一屏之后，在阅读代码的时候，为了串联前后的代码逻辑，就可能需要频繁地上下滚动屏幕，阅读体验不好不说，还容易出错</p> <p>对于类的代码行数的最大限制，这个就更难给出一个确切的值了。我们在第 15 讲中也给出了一个间接的判断标准，那就是，当一个类的代码读起来让你感觉头大了，实现某个功能时不知道该用哪个函数了，想用哪个函数翻半天都找不到了，只用到一个小功能要引入整个类（类中包含很多无关此功能实现的函数）的时候，这就说明类的行数过多了。</p> <h3 id="_4-一行代码多长最合适"><a href="#_4-一行代码多长最合适" class="header-anchor">#</a> 4. 一行代码多长最合适</h3> <p>在Google Java Style Guide文档中，一行代码最长限制为 100 个字符。不过，不同的编程语言、不同的规范、不同的项目团队，对此的限制可能都不相同。不管这个限制是多少，总体上来讲我们要遵循的一个原则是：一行代码最长不能超过 IDE 显示的宽度。需要滚动鼠标才能查看一行的全部代码，显然不利于代码的阅读。当然，这个限制也不能太小，太小会导致很多稍长点的语句被折成两行，也会影响到代码的整洁，不利于阅读。</p> <h3 id="_5-善用空行分割单元块"><a href="#_5-善用空行分割单元块" class="header-anchor">#</a> 5. 善用空行分割单元块</h3> <p>对于比较长的函数，如果逻辑上可以分为几个独立的代码块，在不方便将这些独立的代码块抽取成小函数的情况下，为了让逻辑更加清晰，除了上一节课中提到的用总结性注释的方法之外，我们还可以使用空行来分割各个代码块。</p> <p>除此之外，在类的成员变量与函数之间、静态成员变量与普通成员变量之间、各函数之间、甚至各成员变量之间，我们都可以通过添加空行的方式，让这些不同模块的代码之间，界限更加明确。写代码就类似写文章，善于应用空行，可以让代码的整体结构看起来更加有清晰、有条理。</p> <h3 id="_6-把代码分割成更小的单元"><a href="#_6-把代码分割成更小的单元" class="header-anchor">#</a> 6. 把代码分割成更小的单元</h3> <p>大部分人阅读代码的习惯都是，先看整体再看细节。所以，我们要有模块化和抽象思维，善于将大块的复杂逻辑提炼成类或者函数，屏蔽掉细节，让阅读代码的人不至于迷失在细节中，这样能极大地提高代码的可读性。不过，只有代码逻辑比较复杂的时候，我们其实才建议提炼类或者函数。毕竟如果提炼出的函数只包含两三行代码，在阅读代码的时候，还得跳过去看一下，这样反倒增加了阅读成本。</p> <p>举一个例子来进一步解释一下。代码具体如下所示。重构前，在 invest() 函数中，最开始的那段关于时间处理的代码，是不是很难看懂？重构之后，我们将这部分逻辑抽象成一个函数，并且命名为 isLastDayOfMonth，从名字就能清晰地了解它的功能，判断今天是不是当月的最后一天。这里，我们就是通过将复杂的逻辑代码提炼成函数，大大提高了代码的可读性。</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 重构前的代码</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invest</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> financialProductId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
  calendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">,</span> <span class="token punctuation">(</span>calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重构后的代码：提炼函数之后逻辑更加清晰</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invest</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> financialProductId<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token function">isLastDayOfMonth</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token comment">//...</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">isLastDayOfMonth</span><span class="token punctuation">(</span><span class="token class-name">Date</span> date<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">Calendar</span> calendar <span class="token operator">=</span> <span class="token class-name">Calendar</span><span class="token punctuation">.</span><span class="token function">getInstance</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  calendar<span class="token punctuation">.</span><span class="token function">setTime</span><span class="token punctuation">(</span>date<span class="token punctuation">)</span><span class="token punctuation">;</span>
  calendar<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">,</span> <span class="token punctuation">(</span>calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DATE<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>calendar<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token class-name">Calendar</span><span class="token punctuation">.</span>DAY_OF_MONTH<span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="避免函数参数过多"><a href="#避免函数参数过多" class="header-anchor">#</a> 避免函数参数过多</h3> <p>我个人觉得，函数包含 3、4 个参数的时候还是能接受的，大于等于 5 个的时候，我们就觉得参数有点过多了，会影响到代码的可读性，使用起来也不方便。针对参数过多的情况，一般有 2 种处理方法。</p> <ul><li><p>考虑函数是否职责单一，是否能通过拆分成多个函数的方式来减少参数。示例代码如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUser</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> telephone<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 拆分成多个函数</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">getUserByEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>将函数封装成对象. 示例代码如下所示</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postBlog</span><span class="token punctuation">(</span><span class="token class-name">String</span> title<span class="token punctuation">,</span> <span class="token class-name">String</span> summary<span class="token punctuation">,</span> <span class="token class-name">String</span> keywords<span class="token punctuation">,</span> <span class="token class-name">String</span> content<span class="token punctuation">,</span> <span class="token class-name">String</span> category<span class="token punctuation">,</span> <span class="token keyword">long</span> authorId<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将参数封装成对象</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Blog</span> <span class="token punctuation">{</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> title<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> summary<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> keywords<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">Strint</span> content<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token class-name">String</span> category<span class="token punctuation">;</span>
  <span class="token keyword">private</span> <span class="token keyword">long</span> authorId<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">postBlog</span><span class="token punctuation">(</span><span class="token class-name">Blog</span> blog<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <p>除此之外，如果函数是对外暴露的远程接口，将参数封装成对象，还可以提高接口的兼容性。在往接口中添加新的参数的时候，老的远程接口调用者有可能就不需要修改代码来兼容新的接口了。</p> <h3 id="勿用函数参数来控制逻辑"><a href="#勿用函数参数来控制逻辑" class="header-anchor">#</a> 勿用函数参数来控制逻辑</h3> <p>不要在函数中使用布尔类型的标识参数来控制内部逻辑，true 的时候走这块逻辑，false 的时候走另一块逻辑。这明显违背了单一职责原则和接口隔离原则。我建议将其拆成两个函数，可读性上也要更好。我举个例子来说明一下。</p> <div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buyCourse</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> courseId<span class="token punctuation">,</span> <span class="token keyword">boolean</span> isVip<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 将其拆分成两个函数</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buyCourse</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">buyCourseForVip</span><span class="token punctuation">(</span><span class="token keyword">long</span> userId<span class="token punctuation">,</span> <span class="token keyword">long</span> courseId<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="函数设计要职责单一"><a href="#函数设计要职责单一" class="header-anchor">#</a> 函数设计要职责单一</h3> <p>我们在前面讲到单一职责原则的时候，针对的是类、模块这样的应用对象。实际上，对于函数的设计来说，更要满足单一职责原则。相对于类和模块，函数的粒度比较小，代码行数少，所以在应用单一职责原则的时候，没有像应用到类或者模块那样模棱两可，能多单一就多单一。</p> <p>具体的代码示例如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkUserIfExisting</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">,</span> <span class="token class-name">String</span> username<span class="token punctuation">,</span> <span class="token class-name">String</span> email<span class="token punctuation">)</span>  <span class="token punctuation">{</span> 
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userRepo<span class="token punctuation">.</span><span class="token function">selectUserByTelephone</span><span class="token punctuation">(</span>telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userRepo<span class="token punctuation">.</span><span class="token function">selectUserByUsername</span><span class="token punctuation">(</span>username<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token class-name">StringUtils</span><span class="token punctuation">.</span><span class="token function">isBlank</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">User</span> user <span class="token operator">=</span> userRepo<span class="token punctuation">.</span><span class="token function">selectUserByEmail</span><span class="token punctuation">(</span>email<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> user <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  
  <span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 拆分成三个函数</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkUserIfExistingByTelephone</span><span class="token punctuation">(</span><span class="token class-name">String</span> telephone<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkUserIfExistingByUsername</span><span class="token punctuation">(</span><span class="token class-name">String</span> username<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">checkUserIfExistingByEmail</span><span class="token punctuation">(</span><span class="token class-name">String</span> email<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="移除过深的嵌套层次"><a href="#移除过深的嵌套层次" class="header-anchor">#</a> 移除过深的嵌套层次</h3> <p>代码嵌套层次过深往往是因为 if-else、switch-case、for 循环过度嵌套导致的。我个人建议，嵌套最好不超过两层，超过两层之后就要思考一下是否可以减少嵌套。过深的嵌套本身理解起来就比较费劲，除此之外，嵌套过深很容易因为代码多次缩进，导致嵌套内部的语句超过一行的长度而折成两行，影响代码的整洁。</p> <p>解决嵌套过深的方法也比较成熟，有下面 4 种常见的思路。</p> <ul><li><p>去掉多余的 if 或 else 语句。代码示例如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 示例一</span>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token function">caculateTotalAmount</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Order</span><span class="token punctuation">&gt;</span></span> orders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>orders <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> orders<span class="token punctuation">.</span><span class="token function">isEmpty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span> <span class="token comment">// 此处的else可以去掉</span>
    <span class="token keyword">double</span> amount <span class="token operator">=</span> <span class="token number">0.0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Order</span> order <span class="token operator">:</span> orders<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>order <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        amount <span class="token operator">+=</span> <span class="token punctuation">(</span>order<span class="token punctuation">.</span><span class="token function">getCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> order<span class="token punctuation">.</span><span class="token function">getPrice</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> amount<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 示例二</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> substr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 跟下面的if语句可以合并在一起</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>使用编程语言提供的 continue、break、return 关键字，提前退出嵌套。代码示例如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 重构前的代码</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> substr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 此处还有10行代码...</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重构后的代码：使用continue提前退出</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> substr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span> 
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> <span class="token operator">!</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">continue</span><span class="token punctuation">;</span> 
      <span class="token punctuation">}</span>
      matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token comment">// 此处还有10行代码...</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>调整执行顺序来减少嵌套。具体的代码示例如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 重构前的代码</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> substr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重构后的代码：先执行判空逻辑，再执行正常逻辑</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> substr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//先判空</span>
    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>调整执行顺序来减少嵌套。具体的代码示例如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token comment">// 重构前的代码</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">!=</span> <span class="token keyword">null</span> <span class="token operator">&amp;&amp;</span> substr <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
          matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 重构后的代码：先执行判空逻辑，再执行正常逻辑</span>
<span class="token keyword">public</span> <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> <span class="token function">matchStrings</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> strList<span class="token punctuation">,</span><span class="token class-name">String</span> substr<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>strList <span class="token operator">==</span> <span class="token keyword">null</span> <span class="token operator">||</span> substr <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">//先判空</span>
    <span class="token keyword">return</span> <span class="token class-name">Collections</span><span class="token punctuation">.</span><span class="token function">emptyList</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">&gt;</span></span> matchedStrings <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">String</span> str <span class="token operator">:</span> strList<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>str <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span>substr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        matchedStrings<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> matchedStrings<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h3 id="学会使用解释性变量"><a href="#学会使用解释性变量" class="header-anchor">#</a> 学会使用解释性变量</h3> <p>常用的用解释性变量来提高代码的可读性的情况有下面 2 种。</p> <ul><li><p>常量取代魔法数字。示例代码如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token class-name">CalculateCircularArea</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token number">3.1415</span><span class="token punctuation">)</span> <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 常量替代魔法数字</span>
<span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">final</span> <span class="token class-name">Double</span> PI <span class="token operator">=</span> <span class="token number">3.1415</span><span class="token punctuation">;</span>
<span class="token keyword">public</span> <span class="token keyword">double</span> <span class="token class-name">CalculateCircularArea</span><span class="token punctuation">(</span><span class="token keyword">double</span> radius<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> PI <span class="token operator">*</span> radius <span class="token operator">*</span> radius<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></li> <li><p>使用解释性变量来解释复杂表达式。示例代码如下所示：</p> <div class="language-java extra-class"><pre class="language-java"><code>
<span class="token keyword">if</span> <span class="token punctuation">(</span>date<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>SUMMER_START<span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> date<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>SUMMER_END<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// 引入解释性变量后逻辑更加清晰</span>
<span class="token keyword">boolean</span> isSummer <span class="token operator">=</span> date<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span>SUMMER_START<span class="token punctuation">)</span><span class="token operator">&amp;&amp;</span>date<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span>SUMMER_END<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span>isSummer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span> 
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/计算机基础杂记.html" class="prev">计算机基础杂记</a></span> <span class="next"><a href="/blog/链表队列 LinkedListQueue.html">链表队列 LinkedListQueue</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.3a816497.js" defer></script><script src="/assets/js/2.48b11553.js" defer></script><script src="/assets/js/36.1698b505.js" defer></script>
  </body>
</html>
