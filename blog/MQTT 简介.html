<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>tool-tips</title>
    <meta name="description" content="小西博客">
    
    
    <link rel="preload" href="/assets/css/0.styles.3b2576c3.css" as="style"><link rel="preload" href="/assets/js/app.5ad0f226.js" as="script"><link rel="preload" href="/assets/js/2.7f6b71ff.js" as="script"><link rel="preload" href="/assets/js/18.d4376484.js" as="script"><link rel="prefetch" href="/assets/js/10.63fa02f8.js"><link rel="prefetch" href="/assets/js/11.3917992d.js"><link rel="prefetch" href="/assets/js/12.f4ad2ad7.js"><link rel="prefetch" href="/assets/js/13.71f6257f.js"><link rel="prefetch" href="/assets/js/14.f6068610.js"><link rel="prefetch" href="/assets/js/15.7496b8c2.js"><link rel="prefetch" href="/assets/js/16.84be556c.js"><link rel="prefetch" href="/assets/js/17.666d6a47.js"><link rel="prefetch" href="/assets/js/19.89b2685a.js"><link rel="prefetch" href="/assets/js/20.7eb6504f.js"><link rel="prefetch" href="/assets/js/21.c013fa5d.js"><link rel="prefetch" href="/assets/js/22.63994cfb.js"><link rel="prefetch" href="/assets/js/23.3f3beb03.js"><link rel="prefetch" href="/assets/js/24.f0816928.js"><link rel="prefetch" href="/assets/js/25.c613cd91.js"><link rel="prefetch" href="/assets/js/26.295ef9aa.js"><link rel="prefetch" href="/assets/js/27.48ad1407.js"><link rel="prefetch" href="/assets/js/28.8f383a2f.js"><link rel="prefetch" href="/assets/js/29.bc4e46d2.js"><link rel="prefetch" href="/assets/js/3.695617f1.js"><link rel="prefetch" href="/assets/js/30.b37298a9.js"><link rel="prefetch" href="/assets/js/31.07741852.js"><link rel="prefetch" href="/assets/js/32.ccb66c84.js"><link rel="prefetch" href="/assets/js/33.6f95fd73.js"><link rel="prefetch" href="/assets/js/34.c708ec3c.js"><link rel="prefetch" href="/assets/js/35.3493a860.js"><link rel="prefetch" href="/assets/js/36.61d60177.js"><link rel="prefetch" href="/assets/js/37.025cc15f.js"><link rel="prefetch" href="/assets/js/38.3900655e.js"><link rel="prefetch" href="/assets/js/39.0a6378d0.js"><link rel="prefetch" href="/assets/js/4.0ba1c988.js"><link rel="prefetch" href="/assets/js/40.76a5abd2.js"><link rel="prefetch" href="/assets/js/41.19a817d6.js"><link rel="prefetch" href="/assets/js/42.2b029c63.js"><link rel="prefetch" href="/assets/js/43.95286263.js"><link rel="prefetch" href="/assets/js/44.4f835743.js"><link rel="prefetch" href="/assets/js/45.fec960c2.js"><link rel="prefetch" href="/assets/js/46.18c19a10.js"><link rel="prefetch" href="/assets/js/47.745fd17f.js"><link rel="prefetch" href="/assets/js/48.12410516.js"><link rel="prefetch" href="/assets/js/49.114903f0.js"><link rel="prefetch" href="/assets/js/5.c7cd3996.js"><link rel="prefetch" href="/assets/js/50.5d2c696e.js"><link rel="prefetch" href="/assets/js/51.2c15d1bf.js"><link rel="prefetch" href="/assets/js/52.63efd5e7.js"><link rel="prefetch" href="/assets/js/53.082427c1.js"><link rel="prefetch" href="/assets/js/54.255732c1.js"><link rel="prefetch" href="/assets/js/55.291f8031.js"><link rel="prefetch" href="/assets/js/56.58ba2ffd.js"><link rel="prefetch" href="/assets/js/6.92ad96ae.js"><link rel="prefetch" href="/assets/js/7.777b96ed.js"><link rel="prefetch" href="/assets/js/8.256c0e8b.js"><link rel="prefetch" href="/assets/js/9.f353c7fe.js">
    <link rel="stylesheet" href="/assets/css/0.styles.3b2576c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">tool-tips</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/idea/" class="nav-link">IDEA</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/idea/" class="nav-link">IDEA</a></div><div class="nav-item"><a href="/blog/" class="nav-link router-link-active">博客</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>博客</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/" class="sidebar-link">深度好文</a></li><li><a href="/blog/Chrome 浏览器插件整理.html" class="sidebar-link">Chrome 浏览器插件整理</a></li><li><a href="/blog/ECMAscript.html" class="sidebar-link">ECMAscript</a></li><li><a href="/blog/Git 教程.html" class="sidebar-link">Git 教程</a></li><li><a href="/blog/GridFlow 快捷键.html" class="sidebar-link">GridFlow 快捷键</a></li><li><a href="/blog/JS 数组整理.html" class="sidebar-link">JS 数组整理</a></li><li><a href="/blog/Kafka 入门探索.html" class="sidebar-link">Kafka 入门探索</a></li><li><a href="/blog/LeetCode 122号问题 买卖股票的最佳时机.html" class="sidebar-link">LeetCode 122号问题 买卖股票的最佳时机</a></li><li><a href="/blog/LeetCode 189号问题 旋转数组.html" class="sidebar-link">LeetCode 189号问题 旋转数组</a></li><li><a href="/blog/LeetCode 203号问题 删除链表中的元素.html" class="sidebar-link">LeetCode 203号问题 删除链表中的元素</a></li><li><a href="/blog/LeetCode 21号问题， 合并 k 条链表.html" class="sidebar-link">LeetCode 21号问题， 合并 k 条链表</a></li><li><a href="/blog/LeetCode 第70号 爬楼梯 问题.html" class="sidebar-link">LeetCode 第70号 爬楼梯 问题</a></li><li><a href="/blog/Linux  技巧记录.html" class="sidebar-link">Linux  技巧记录</a></li><li><a href="/blog/MQTT 简介.html" class="active sidebar-link">MQTT 简介</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/MQTT 简介.html#创建-mqtt-user-相关表" class="sidebar-link">创建 mqtt user 相关表</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/MQTT 简介.html#acl-配置" class="sidebar-link">ACL 配置</a></li><li class="sidebar-sub-header"><a href="/blog/MQTT 简介.html#修改配置" class="sidebar-link">修改配置</a></li></ul></li></ul></li><li><a href="/blog/MYSQL EXPLAIN.html" class="sidebar-link">MYSQL EXPLAIN</a></li><li><a href="/blog/MybatisPlus 自动生成器配置.html" class="sidebar-link">MybatisPlus 自动生成器配置</a></li><li><a href="/blog/Nginx 命令.html" class="sidebar-link">Nginx 命令</a></li><li><a href="/blog/Nginx 日志分析工具 goaccess.html" class="sidebar-link">Nginx 日志分析工具 goaccess</a></li><li><a href="/blog/Node.js 知识点整理.html" class="sidebar-link">Node.js 知识点整理</a></li><li><a href="/blog/Redis KeyGenerator key 生成器.html" class="sidebar-link">Redis KeyGenerator key 生成器</a></li><li><a href="/blog/RequestBody 和 RequestParam的区别.html" class="sidebar-link">RequestBody 和 RequestParam的区别</a></li><li><a href="/blog/SpringIOC 概述.html" class="sidebar-link">SpringIOC 概述</a></li><li><a href="/blog/centos 7 安装 mongodb.html" class="sidebar-link">centos 7 安装 mongodb</a></li><li><a href="/blog/centos 自动配置 vim 编辑器.html" class="sidebar-link">centos 自动配置 vim 编辑器</a></li><li><a href="/blog/docker 安装nexus.html" class="sidebar-link">docker 安装nexus</a></li><li><a href="/blog/docker.html" class="sidebar-link">docker</a></li><li><a href="/blog/dubbo 初体验.html" class="sidebar-link">dubbo 初体验</a></li><li><a href="/blog/leetCode 存在重复元素.html" class="sidebar-link">leetCode 存在重复元素</a></li><li><a href="/blog/linux 记录.html" class="sidebar-link">linux 记录</a></li><li><a href="/blog/vue 整理.html" class="sidebar-link">vue 整理</a></li><li><a href="/blog/websocket 参考代码.html" class="sidebar-link">websocket 参考代码</a></li><li><a href="/blog/xshell  配色方案.html" class="sidebar-link">xshell  配色方案</a></li><li><a href="/blog/优秀网站合集.html" class="sidebar-link">优秀网站合集</a></li><li><a href="/blog/写出优美Java代码注意事项.html" class="sidebar-link">写出优美Java代码注意事项</a></li><li><a href="/blog/创建一个属于自己的动态数组.html" class="sidebar-link">创建一个属于自己的动态数组</a></li><li><a href="/blog/助你进步的优秀网站.html" class="sidebar-link">助你进步的优秀网站</a></li><li><a href="/blog/工具网站整理.html" class="sidebar-link">工具网站整理</a></li><li><a href="/blog/我平常开发都会用什么额外软件辅助开发.html" class="sidebar-link">我平常开发都会用什么额外软件辅助开发</a></li><li><a href="/blog/手写快速排序.html" class="sidebar-link">手写快速排序</a></li><li><a href="/blog/排序算法.html" class="sidebar-link">排序算法</a></li><li><a href="/blog/搭建JENKINS 服务器.html" class="sidebar-link">搭建JENKINS 服务器</a></li><li><a href="/blog/装机必备软件.html" class="sidebar-link">装机必备软件</a></li><li><a href="/blog/计算机基础杂记.html" class="sidebar-link">计算机基础杂记</a></li><li><a href="/blog/配置https 网站.html" class="sidebar-link">配置https 网站</a></li><li><a href="/blog/链表队列 LinkedListQueue.html" class="sidebar-link">链表队列 LinkedListQueue</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p><img src="FDC70FA27CA240A98F6446B63C200F1E" alt="image"></p> <h3 id="一、简述"><a href="#一、简述" class="header-anchor">#</a> 一、简述</h3> <p><code>MQTT（Message Queuing Telemetry Transport</code>，消息队列遥测传输协议），是一种基于发布/订阅<code>（publish/subscribe</code>）模式的&quot;轻量级&quot;通讯协议，该协议构建于 TCP/IP 协议上，由 IBM 在 1999 年发布。<code>MQTT</code>最大优点在于，可以以极少的代码和有限的带宽，为连接远程设备提供实时可靠的消息服务。作为一种低开销、低带宽占用的即时通讯协议，使其在物联网、小型设备、移动应用等方面有较广泛的应用。</p> <p><code>MQTT</code>是一个基于客户端-服务器的消息发布/订阅传输协议。<code>MQTT</code>协议是轻量、简单、开放和易于实现的，这些特点使它适用范围非常广泛。在很多情况下，包括受限的环境中，如：机器与机器<code>（M2M）</code>通信和物联网<code>（IoT）</code>。其在，通过卫星链路通信传感器、偶尔拨号的医疗设备、智能家居、及一些小型化设备中已广泛使用。</p> <p><img src="0C2736D90FF04F1F9B7F818088172F82" alt="image"></p> <h3 id="二、设计规范"><a href="#二、设计规范" class="header-anchor">#</a> 二、设计规范</h3> <p>由于物联网的环境是非常特别的，所以 MQTT 遵循以下设计原则：</p> <p>（1）精简，不添加可有可无的功能；</p> <p>（2）发布/订阅（Pub/Sub）模式，方便消息在传感器之间传递；</p> <p>（3）允许用户动态创建主题，零运维成本；</p> <p>（4）把传输量降到最低以提高传输效率；</p> <p>（5）把低带宽、高延迟、不稳定的网络等因素考虑在内；</p> <p>（6）支持连续的会话控制；</p> <p>（7）理解客户端计算能力可能很低；</p> <p>（8）提供服务质量管理；</p> <p>（9）假设数据不可知，不强求传输数据的类型与格式，保持灵活性。</p> <p><img src="8B688A7D9CF44BE39CFDC18C1113D1D8" alt="image"></p> <h3 id="三、主要特性"><a href="#三、主要特性" class="header-anchor">#</a> 三、主要特性</h3> <p><code>MQTT</code>协议工作在低带宽、不可靠的网络的远程传感器和控制设备通讯而设计的协议，它具有以下主要的几项特性：</p> <p>（1）使用发布/订阅消息模式，提供一对多的消息发布，解除应用程序耦合。</p> <p>这一点很类似于 XMPP，但是 MQTT 的信息冗余远小于 XMPP，,因为 XMPP 使用 XML 格式文本来传递数据。</p> <p>（2）对负载内容屏蔽的消息传输。</p> <p>（3）使用 TCP/IP 提供网络连接。</p> <p>主流的 MQTT 是基于 TCP 连接进行数据推送的，但是同样有基于 UDP 的版本，叫做 MQTT-SN。这两种版本由于基于不同的连接方式，优缺点自然也就各有不同了。</p> <p>（4）有三种消息发布服务质量：</p> <p>&quot;至多一次&quot;，消息发布完全依赖底层 TCP/IP 网络。会发生消息丢失或重复。这一级别可用于如下情况，环境传感器数据，丢失一次读记录无所谓，因为不久后还会有第二次发送。这一种方式主要普通 APP 的推送，倘若你的智能设备在消息推送时未联网，推送过去没收到，再次联网也就收不到了。</p> <p>&quot;至少一次&quot;，确保消息到达，但消息重复可能会发生。</p> <p>&quot;只有一次&quot;，确保消息到达一次。在一些要求比较严格的计费系统中，可以使用此级别。在计费系统中，消息重复或丢失会导致不正确的结果。这种最高质量的消息发布服务还可以用于即时通讯类的 APP 的推送，确保用户收到且只会收到一次。</p> <p>（5）小型传输，开销很小（固定长度的头部是 2 字节），协议交换最小化，以降低网络流量。</p> <p>这就是为什么在介绍里说它非常适合&quot;在物联网领域，传感器与服务器的通信，信息的收集&quot;，要知道嵌入式设备的运算能力和带宽都相对薄弱，使用这种协议来传递消息再适合不过了。</p> <p>（6）使用 Last Will 和 Testament 特性通知有关各方客户端异常中断的机制。</p> <p>Last Will：即遗言机制，用于通知同一主题下的其他设备发送遗言的设备已经断开了连接。</p> <p>Testament：遗嘱机制，功能类似于 Last Will。</p> <h3 id="四、mqtt-协议原理"><a href="#四、mqtt-协议原理" class="header-anchor">#</a> 四、MQTT 协议原理</h3> <h4 id="_4-1-mqtt-协议实现方式"><a href="#_4-1-mqtt-协议实现方式" class="header-anchor">#</a> 4.1 MQTT 协议实现方式</h4> <p>实现 MQTT 协议需要客户端和服务器端通讯完成，在通讯过程中，MQTT 协议中有三种身份：发布者（Publish）、代理（Broker）（服务器）、订阅者（Subscribe）。其中，消息的发布者和订阅者都是客户端，消息代理是服务器，消息发布者可以同时是订阅者。</p> <p>MQTT 传输的消息分为：主题（Topic）和负载（payload）两部分：</p> <p>（1）Topic，可以理解为消息的类型，订阅者订阅（Subscribe）后，就会收到该主题的消息内容（payload）；</p> <p>（2）payload，可以理解为消息的内容，是指订阅者具体要使用的内容。</p> <h4 id="_4-2-网络传输与应用消息"><a href="#_4-2-网络传输与应用消息" class="header-anchor">#</a> 4.2 网络传输与应用消息</h4> <p>MQTT 会构建底层网络传输：它将建立客户端到服务器的连接，提供两者之间的一个有序的、无损的、基于字节流的双向传输。</p> <p>当应用数据通过 MQTT 网络发送时，MQTT 会把与之相关的服务质量（QoS）和主题名（Topic）相关连。</p> <h4 id="_4-3-mqtt-客户端"><a href="#_4-3-mqtt-客户端" class="header-anchor">#</a> 4.3 MQTT 客户端</h4> <p>一个使用 MQTT 协议的应用程序或者设备，它总是建立到服务器的网络连接。客户端可以：</p> <p>（1）发布其他客户端可能会订阅的信息；</p> <p>（2）订阅其它客户端发布的消息；</p> <p>（3）退订或删除应用程序的消息；</p> <p>（4）断开与服务器连接。</p> <h4 id="_4-4-mqtt-服务器"><a href="#_4-4-mqtt-服务器" class="header-anchor">#</a> 4.4 MQTT 服务器</h4> <p>MQTT 服务器以称为&quot;消息代理&quot;（Broker），可以是一个应用程序或一台设备。它是位于消息发布者和订阅者之间，它可以：</p> <p>（1）接受来自客户的网络连接；</p> <p>（2）接受客户发布的应用信息；</p> <p>（3）处理来自客户端的订阅和退订请求；</p> <p>（4）向订阅的客户转发应用程序消息。</p> <h4 id="_4-5-mqtt-协议中的订阅、主题、会话"><a href="#_4-5-mqtt-协议中的订阅、主题、会话" class="header-anchor">#</a> 4.5 MQTT 协议中的订阅、主题、会话</h4> <p>一、订阅（Subscription）</p> <p>订阅包含主题筛选器（Topic Filter）和最大服务质量（QoS）。订阅会与一个会话（Session）关联。一个会话可以包含多个订阅。每一个会话中的每个订阅都有一个不同的主题筛选器。</p> <p>二、会话（Session）</p> <p>每个客户端与服务器建立连接后就是一个会话，客户端和服务器之间有状态交互。会话存在于一个网络之间，也可能在客户端和服务器之间跨越多个连续的网络连接。</p> <p>三、主题名（Topic Name）</p> <p>连接到一个应用程序消息的标签，该标签与服务器的订阅相匹配。服务器会将消息发送给订阅所匹配标签的每个客户端。</p> <p>四、主题筛选器（Topic Filter）</p> <p>一个对主题名通配符筛选器，在订阅表达式中使用，表示订阅所匹配到的多个主题。</p> <p>五、负载（Payload）</p> <p>消息订阅者所具体接收的内容。</p> <h4 id="_4-6-mqtt-协议中的方法"><a href="#_4-6-mqtt-协议中的方法" class="header-anchor">#</a> 4.6 MQTT 协议中的方法</h4> <p>MQTT 协议中定义了一些方法（也被称为动作），来于表示对确定资源所进行操作。这个资源可以代表预先存在的数据或动态生成数据，这取决于服务器的实现。通常来说，资源指服务器上的文件或输出。主要方法有：</p> <p>（1）Connect。等待与服务器建立连接。</p> <p>（2）Disconnect。等待 MQTT 客户端完成所做的工作，并与服务器断开 TCP/IP 会话。</p> <p>（3）Subscribe。等待完成订阅。</p> <p>（4）UnSubscribe。等待服务器取消客户端的一个或多个 topics 订阅。</p> <p>（5）Publish。MQTT 客户端发送消息请求，发送完成后返回应用程序线程。</p> <h2 id="创建-mqtt-user-相关表"><a href="#创建-mqtt-user-相关表" class="header-anchor">#</a> 创建 mqtt user 相关表</h2> <h3 id="acl-配置"><a href="#acl-配置" class="header-anchor">#</a> ACL 配置</h3> <div class="language-sql extra-class"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">`</span>mqtt_acl<span class="token punctuation">`</span> <span class="token punctuation">(</span>
  <span class="token punctuation">`</span>id<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">11</span><span class="token punctuation">)</span> <span class="token keyword">unsigned</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">AUTO_INCREMENT</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>allow<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token number">1</span> <span class="token keyword">COMMENT</span> <span class="token string">'0: deny, 1: allow'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>ipaddr<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">60</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'IpAddress'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>username<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'Username'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>clientid<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'ClientId'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>access<span class="token punctuation">`</span> <span class="token keyword">int</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">COMMENT</span> <span class="token string">'1: subscribe, 2: publish, 3: pubsub'</span><span class="token punctuation">,</span>
  <span class="token punctuation">`</span>topic<span class="token punctuation">`</span> <span class="token keyword">varchar</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">DEFAULT</span> <span class="token string">''</span> <span class="token keyword">COMMENT</span> <span class="token string">'Topic Filter'</span><span class="token punctuation">,</span>
  <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span><span class="token punctuation">`</span>id<span class="token punctuation">`</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span> <span class="token keyword">ENGINE</span><span class="token operator">=</span><span class="token keyword">InnoDB</span> <span class="token keyword">DEFAULT</span> <span class="token keyword">CHARSET</span><span class="token operator">=</span>utf8<span class="token punctuation">;</span>

</code></pre></div><blockquote><p>解释
allow：禁止（0）；或则允许（1）。</p></blockquote> <p>ipaddr：设置 IP 地址。</p> <p>username：连接客户端的用户名，此处的值如果设置为 $all 表示该规则适用于所有的用户。</p> <p>clientid：连接客户端的 clientId。</p> <p>access：允许的操作。订阅（1）；发布（2）；订阅和发布都可以（3）。</p> <p>topic：控制的主题名。主题可以使用通配符；并且可以在主题中加入占位符 %c , 来匹配带客户端 ID 的主题，例如 /smarthome/$clientId/temperature 。</p> <h3 id="修改配置"><a href="#修改配置" class="header-anchor">#</a> 修改配置</h3> <p>打开配置文件 <code>/etc/emqx/emqx.conf</code> ，将 ACL 的规则匹配变为：不匹配则不允许。</p> <div class="language- extra-class"><pre class="language-text"><code>mqtt.acl_nomatch = deny
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/Linux  技巧记录.html" class="prev">Linux  技巧记录</a></span> <span class="next"><a href="/blog/MYSQL EXPLAIN.html">MYSQL EXPLAIN</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.5ad0f226.js" defer></script><script src="/assets/js/2.7f6b71ff.js" defer></script><script src="/assets/js/18.d4376484.js" defer></script>
  </body>
</html>
